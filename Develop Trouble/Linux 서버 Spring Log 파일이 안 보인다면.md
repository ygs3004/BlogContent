
운영 서버에서 로그를 확인해 보아야 하는 일이 생겼다.
그런데 왜인지 로그 파일을 저장하는 경로가 보이지 않는 것이다. 운영 서버 리눅스 계정이 root 계정이 아니었기에 권한의 문제로 보이지 않는 것으로 처음엔 생각하였다.

고객사 개발자분께 해당 경로의 로그 파일 확인을 요청하고 DevOps에 빠삭하신 차장님께 상의 하였다. 운영 서버를 한동안 체크하였고, 애초에 로그가 저장되지 않았다는 사실을 깨달았다. 고객사 개발자 분도 파일이 아예 존재하지 않는다고 연락을 주셨다. 전임자 분이 담당할 때 부터 지금까지 운영 서버 이슈는 DB쪽 체크를 하는 정도에서 문제를 해결할 수 있었기에 로그가 저장되고 있지 않다는 사실을 몰랐던 것이다.

로그가 보이지 않았던 이유는 읽기 권한이 없는 것의 문제가 아니라 쓰기 권한의 문제였다. Spring 서비스가 당시 제공 받은 계정으로 실행되고 있었고, 쓰기 권한이 없던 계정의 서비스이다 보니 로그 라이브러리에서 로그 파일을 쓰지 못하였던 것이다. 로그 파일 경로를 해당 계정의 하위 경로로 바꾸어 문제를 해결하였다.

요약: Spring 로그가 남지 않는다면 로그 경로에 대한 서비스의 실행 계정의 쓰기 권한을 확인해야 한다.

